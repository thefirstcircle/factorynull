<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Steve O’Neill">
<meta name="description" content="What stocks do our senators have in common?">

<title>STOCKS Act</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="STOCKS_Act_final_files/libs/clipboard/clipboard.min.js"></script>
<script src="STOCKS_Act_final_files/libs/quarto-html/quarto.js"></script>
<script src="STOCKS_Act_final_files/libs/quarto-html/popper.min.js"></script>
<script src="STOCKS_Act_final_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="STOCKS_Act_final_files/libs/quarto-html/anchor.min.js"></script>
<link href="STOCKS_Act_final_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="STOCKS_Act_final_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="STOCKS_Act_final_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="STOCKS_Act_final_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="STOCKS_Act_final_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<link href="STOCKS_Act_final_files/libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="STOCKS_Act_final_files/libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">STOCKS Act</h1>
  <div class="quarto-categories">
    <div class="quarto-category">final_project_697</div>
  </div>
  </div>

<div>
  <div class="description">
    What stocks do our senators have in common?
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Steve O’Neill </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Since 2012, the STOCK Act (<em>Stop Trading on Congressional Knowledge</em>) has given insight into the ethically dubious of congressional insider trading. Since congresspeople sit on many committees where they might gain inside information, it’s widely acknowledged that they have an unfair advantage over others in the stock market. Instead of making trades outright illegal for congresspeople, the STOCK Act (among many other things) requires them to disclose purchase and sales of stocks, bonds, and securities to the public.</p>
<p>It’s not as if insider trading has stopped. An <a href="https://www.capitoltrades.com/">industry</a> has naturally sprung up around the data provided by the STOCK Act, operating on the principle that if the stock is good enough for a member of congress, it should be good enough for you, too.</p>
<p>A 2022 New York Times investigation found that <a href="https://www.nytimes.com/interactive/2022/09/13/us/politics/congress-stock-trading-investigation.html">more than half</a> of congress members sat on committees that gave them unique insight into the industries they were investing in.</p>
<section id="network-analysis" class="level3">
<h3 class="anchored" data-anchor-id="network-analysis">Network Analysis</h3>
<p>I propose a network where congresspeople are <strong>nodes</strong> and <em>whether they have a stock in common</em> are <strong>edges</strong>. This could be adjusted to whether they have at least 3 or 5 stocks in common depending on the density of the network.</p>
<p>The nodes will be modified to include partisan affiliation, committee assignment, and other factors as nodeattributes.</p>
<p>Among my research questions are:</p>
<ul>
<li><p>Who is the most connected? Are there any prominent clusters of senators based on their investment patterns?</p></li>
<li><p>Are there any senators who bridge networks, e.g.&nbsp;by holding different kinds of stocks?</p></li>
<li><p>What effect does political affiliation have on position in the network? Are Republicans and Democrats more alike than one would think in terms of investment strategies?</p></li>
<li><p>How do investment ties relate to <strong>committee assignments</strong>?</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>senators_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"SenatorCleaned.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To achieve this, I’ve been using this Kaggle dataset that, while not intended for social network analysis, will suit my purpose (it’s just senators for now):</p>
<p>https://www.kaggle.com/datasets/heresjohnnyv/congress-investments</p>
<p>Here, my code finds the Ticker values (e.g., AAPL) for each senator’s investment, then creates an edgelist between them and another senator as long as they both are invested in the same Ticker.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data for valid Ticker values</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="ot">&lt;-</span> senators_data <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Ticker) <span class="sc">&amp;</span> Ticker <span class="sc">!=</span> <span class="st">""</span> <span class="sc">&amp;</span> Ticker <span class="sc">!=</span><span class="st">"--"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Find senators who share the same Ticker</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>shared_ticker <span class="ot">&lt;-</span> filtered_data <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Ticker) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">senators =</span> <span class="fu">list</span>(Name)) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">length</span>(senators) <span class="sc">&gt;=</span> <span class="dv">2</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create combinations of senators within each shared Ticker group</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>edge_list <span class="ot">&lt;-</span> shared_ticker <span class="sc">%&gt;%</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">senator_combinations =</span> <span class="fu">map</span>(senators, <span class="sc">~</span> {</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(.x) <span class="sc">&gt;=</span> <span class="dv">2</span>) <span class="fu">t</span>(<span class="fu">combn</span>(.x, <span class="dv">2</span>)) <span class="cf">else</span> <span class="cn">NULL</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  })) <span class="sc">%&gt;%</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(senator_combinations) <span class="sc">%&gt;%</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>senators) <span class="sc">%&gt;%</span> </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#Correct the character matrix issue that resulted from unnest()</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>edge_list <span class="ot">&lt;-</span> edge_list <span class="sc">%&gt;%</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">from =</span> edge_list<span class="sc">$</span>senator_combinations[,<span class="dv">1</span>], <span class="at">to =</span> edge_list<span class="sc">$</span>senator_combinations[,<span class="dv">2</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>senator_combinations) <span class="sc">%&gt;%</span> </span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">'from'</span> <span class="sc">!=</span> <span class="st">'to'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">'from'</span>, <span class="st">'to'</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Create network graph</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>network_graph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edge_list, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>network_graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH b73eb2a UN-- 56 6781 -- 
+ attr: name (v/c)
+ edges from b73eb2a (vertex names):
 [1] Sheldon Whitehouse --Sheldon Whitehouse 
 [2] Sheldon Whitehouse --James M Inhofe     
 [3] Sheldon Whitehouse --Robert P Corker Jr.
 [4] Sheldon Whitehouse --Thomas R Carper    
 [5] James M Inhofe     --James M Inhofe     
 [6] Sheldon Whitehouse --James M Inhofe     
 [7] James M Inhofe     --Robert P Corker Jr.
 [8] James M Inhofe     --Thomas R Carper    
+ ... omitted several edges</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the network graph</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(network_graph, <span class="at">edge.arrow.size =</span> <span class="fl">0.5</span>, <span class="at">vertex.label.cex =</span> <span class="fl">0.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="STOCKS_Act_final_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Please ignore the self-loops for now!</p>
<p>Let’s have a closer look:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the desired x-axis and y-axis range</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>x_min <span class="ot">&lt;-</span> <span class="sc">-</span>.<span class="dv">25</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>x_max <span class="ot">&lt;-</span> .<span class="dv">25</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>y_min <span class="ot">&lt;-</span> <span class="sc">-</span>.<span class="dv">25</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>y_max <span class="ot">&lt;-</span> .<span class="dv">25</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the network graph with the specified zoom level</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(network_graph, </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.arrow.size =</span> <span class="fl">0.5</span>, </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.cex =</span> <span class="fl">0.7</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(x_min, x_max), </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(y_min, y_max))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="STOCKS_Act_final_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="description-of-the-network" class="level3">
<h3 class="anchored" data-anchor-id="description-of-the-network">Description of the network</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_bipartite</span>(network_graph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_directed</span>(network_graph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_weighted</span>(network_graph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<section id="dyad-census" class="level4">
<h4 class="anchored" data-anchor-id="dyad-census">Dyad Census</h4>
<p>It’s fully expected that there are no asymmetric dyads, as this is currently a binary graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">dyad.census</span>(network_graph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$mut
[1] 567

$asym
[1] 0

$null
[1] 973</code></pre>
</div>
</div>
</section>
<section id="triad-census" class="level4">
<h4 class="anchored" data-anchor-id="triad-census">Triad Census</h4>
<p>I can use my trusty function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>triad_chart_func <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>triad_data <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">triad_census</span>(data)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>triad_types <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="st">'003'</span> <span class="ot">=</span> <span class="st">'A,B,C, empty triad.'</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="st">'012'</span> <span class="ot">=</span> <span class="st">'A-&gt;B, C, triad with a single directed edge.'</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="st">'102'</span> <span class="ot">=</span> <span class="st">'A&lt;-&gt;B, C, triad with a reciprocated connection between two vertices.'</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="st">'021D'</span> <span class="ot">=</span> <span class="st">'A&lt;-B-&gt;C, triadic out-star.'</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="st">'021U'</span> <span class="ot">=</span> <span class="st">'A-&gt;B&lt;-C triadic in-star.'</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="st">'021C'</span> <span class="ot">=</span> <span class="st">'A-&gt;B-&gt;C, directed line.'</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="st">'111D'</span> <span class="ot">=</span> <span class="st">'A&lt;-&gt;B&lt;-C.'</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="st">'111U'</span> <span class="ot">=</span> <span class="st">'A&lt;-&gt;B-&gt;C.'</span>,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="st">'030T'</span> <span class="ot">=</span> <span class="st">'A-&gt;B&lt;-C, A-&gt;C.'</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="st">'030C'</span> <span class="ot">=</span> <span class="st">'A&lt;-B&lt;-C, A-&gt;C.'</span>,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="st">'201'</span> <span class="ot">=</span> <span class="st">'A&lt;-&gt;B&lt;-&gt;C.'</span>,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="st">'120D'</span> <span class="ot">=</span> <span class="st">'A&lt;-B-&gt;C, A&lt;-&gt;C.'</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="st">'120U'</span> <span class="ot">=</span> <span class="st">'A-&gt;B&lt;-C, A&lt;-&gt;C.'</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="st">'120C'</span> <span class="ot">=</span> <span class="st">'A-&gt;B-&gt;C, A&lt;-&gt;C.'</span>,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="st">'210'</span> <span class="ot">=</span> <span class="st">'A-&gt;B&lt;-&gt;C, A&lt;-&gt;C.'</span>,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="st">'300'</span> <span class="ot">=</span> <span class="st">'A&lt;-&gt;B&lt;-&gt;C, A&lt;-&gt;C,  complete triad.'</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(triad_data) <span class="ot">&lt;-</span> triad_types</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>triad_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(triad_data)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>triad_data<span class="sc">$</span>triad_type <span class="ot">&lt;-</span> <span class="fu">row.names</span>(triad_data)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(triad_data, <span class="fu">aes</span>(<span class="at">x =</span> triad_type, <span class="at">y =</span> triad_data)) <span class="sc">+</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>, </span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Frequency of Triad Types"</span>) <span class="sc">+</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And plot the result:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">triad_chart_func</span>(network_graph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in igraph::triad_census(data): At core/misc/motifs.c:1165 : Triad
census called on an undirected graph.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="STOCKS_Act_final_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="transitivity" class="level4">
<h4 class="anchored" data-anchor-id="transitivity">Transitivity</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(network_graph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7213385</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>senators_of_interest <span class="ot">&lt;-</span> <span class="fu">V</span>(network_graph)[<span class="fu">c</span>(<span class="st">"Barbara Boxer"</span>,<span class="st">"Claire McCaskill"</span>, <span class="st">"Tom Coburn"</span>)]</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(network_graph, <span class="at">type=</span><span class="st">"local"</span>, <span class="at">vids=</span>senators_of_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0000000 1.0000000 0.7684729</code></pre>
</div>
</div>
</section>
</section>
<section id="distances-path-lengths" class="level3">
<h3 class="anchored" data-anchor-id="distances-path-lengths">Distances (path lengths)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distances</span>(network_graph,<span class="st">"James M Inhofe"</span>,<span class="st">"Barbara Boxer"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Barbara Boxer
James M Inhofe             2</code></pre>
</div>
</div>
</section>
<section id="components-size" class="level3">
<h3 class="anchored" data-anchor-id="components-size">Components, Size</h3>
<p>This indicates there are a few senators that have no stocks in common with others:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(network_graph)<span class="sc">$</span>no <span class="co">#Number of components</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(network_graph)<span class="sc">$</span>csize <span class="co">#Size of each component</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 54  1  1</code></pre>
</div>
</div>
</section>
<section id="degrees" class="level3">
<h3 class="anchored" data-anchor-id="degrees">Degrees</h3>
<p>This shows the most ‘connected’ stock traders. Naturally, for now while I have a binary network, <code>in_degree</code> will be the same as <code>out_degree</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>in_degrees <span class="ot">&lt;-</span> <span class="fu">degree</span>(network_graph, <span class="at">mode =</span> <span class="st">"in"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>out_degrees <span class="ot">&lt;-</span> <span class="fu">degree</span>(network_graph, <span class="at">mode =</span> <span class="st">"out"</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>total_degrees <span class="ot">&lt;-</span> <span class="fu">degree</span>(network_graph, <span class="at">mode =</span> <span class="st">"total"</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">degree</span>(network_graph, <span class="at">mode =</span> <span class="st">"in"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Sheldon Whitehouse            James M Inhofe       Robert P Corker Jr. 
                     1167                       522                      1275 
          Thomas R Carper       Thomas H Tuberville            Kelly Loeffler 
                      820                       299                       693 
         Shelley M Capito               Pat Roberts         David A Perdue Jr 
                      910                       433                      1126 
      Christopher A Coons               John F Reed               Dean Heller 
                       32                       338                       339 
           Jeffry L Flake               Jerry Moran               John Cornyn 
                       83                       380                        27 
              John Hoeven          Patrick J Toomey              Patty Murray 
                      648                       272                       645 
          Susan M Collins           Saxby Chambliss           William Cassidy 
                      829                        23                       466 
           Daniel R Coats             Gary C Peters              Thad Cochran 
                       82                       193                       910 
    Ladda Tammy Duckworth                Tina Smith          Angus S King Jr. 
                      132                        20                       185 
               Tom Coburn            David B Vitter             Cory A Booker 
                      243                        20                        82 
          Jacklyn S Rosen           Thomas R Tillis                   Jon Kyl 
                        4                        30                        26 
         Claire McCaskill             Barbara Boxer       John W Hickenlooper 
                        6                         2                         3 
                Roy Blunt             Rafael E Cruz               Mark Begich 
                       36                        36                         4 
       Robert P Casey Jr.          Chris Van Hollen              Thomas Udall 
                        2                        73                        20 
                Rand Paul        Joseph Manchin III A. Mitchell McConnell Jr. 
                       10                         2                        17 
        Daniel S Sullivan            Michael B Enzi           Timothy M Kaine 
                       20                         2                        25 
        Benjamin L Cardin            John N Kennedy     John D Rockefeller IV 
                       10                         4                        15 
       Barbara A Mikulski          Michael F Bennet            Maria Cantwell 
                        3                         3                         2 
            Mark R Warner      William F Hagerty IV 
                        4                         9 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>node_degrees <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">node =</span> <span class="fu">V</span>(network_graph)<span class="sc">$</span>name, <span class="at">in_degree =</span> in_degrees, <span class="at">out_degree =</span> out_degrees, <span class="at">total_degree =</span> total_degrees)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>sorted_nodes <span class="ot">&lt;-</span> node_degrees[<span class="fu">order</span>(<span class="sc">-</span>node_degrees<span class="sc">$</span>total_degree), ]</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>sorted_nodes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["node"],"name":[1],"type":["chr"],"align":["left"]},{"label":["in_degree"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["out_degree"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["total_degree"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Robert P Corker Jr.","2":"1275","3":"1275","4":"1275","_rn_":"Robert P Corker Jr."},{"1":"Sheldon Whitehouse","2":"1167","3":"1167","4":"1167","_rn_":"Sheldon Whitehouse"},{"1":"David A Perdue Jr","2":"1126","3":"1126","4":"1126","_rn_":"David A Perdue Jr"},{"1":"Shelley M Capito","2":"910","3":"910","4":"910","_rn_":"Shelley M Capito"},{"1":"Thad Cochran","2":"910","3":"910","4":"910","_rn_":"Thad Cochran"},{"1":"Susan M Collins","2":"829","3":"829","4":"829","_rn_":"Susan M Collins"},{"1":"Thomas R Carper","2":"820","3":"820","4":"820","_rn_":"Thomas R Carper"},{"1":"Kelly Loeffler","2":"693","3":"693","4":"693","_rn_":"Kelly Loeffler"},{"1":"John Hoeven","2":"648","3":"648","4":"648","_rn_":"John Hoeven"},{"1":"Patty Murray","2":"645","3":"645","4":"645","_rn_":"Patty Murray"},{"1":"James M Inhofe","2":"522","3":"522","4":"522","_rn_":"James M Inhofe"},{"1":"William Cassidy","2":"466","3":"466","4":"466","_rn_":"William Cassidy"},{"1":"Pat Roberts","2":"433","3":"433","4":"433","_rn_":"Pat Roberts"},{"1":"Jerry Moran","2":"380","3":"380","4":"380","_rn_":"Jerry Moran"},{"1":"Dean Heller","2":"339","3":"339","4":"339","_rn_":"Dean Heller"},{"1":"John F Reed","2":"338","3":"338","4":"338","_rn_":"John F Reed"},{"1":"Thomas H Tuberville","2":"299","3":"299","4":"299","_rn_":"Thomas H Tuberville"},{"1":"Patrick J Toomey","2":"272","3":"272","4":"272","_rn_":"Patrick J Toomey"},{"1":"Tom Coburn","2":"243","3":"243","4":"243","_rn_":"Tom Coburn"},{"1":"Gary C Peters","2":"193","3":"193","4":"193","_rn_":"Gary C Peters"},{"1":"Angus S King Jr.","2":"185","3":"185","4":"185","_rn_":"Angus S King Jr."},{"1":"Ladda Tammy Duckworth","2":"132","3":"132","4":"132","_rn_":"Ladda Tammy Duckworth"},{"1":"Jeffry L Flake","2":"83","3":"83","4":"83","_rn_":"Jeffry L Flake"},{"1":"Daniel R Coats","2":"82","3":"82","4":"82","_rn_":"Daniel R Coats"},{"1":"Cory A Booker","2":"82","3":"82","4":"82","_rn_":"Cory A Booker"},{"1":"Chris Van Hollen","2":"73","3":"73","4":"73","_rn_":"Chris Van Hollen"},{"1":"Roy Blunt","2":"36","3":"36","4":"36","_rn_":"Roy Blunt"},{"1":"Rafael E Cruz","2":"36","3":"36","4":"36","_rn_":"Rafael E Cruz"},{"1":"Christopher A Coons","2":"32","3":"32","4":"32","_rn_":"Christopher A Coons"},{"1":"Thomas R Tillis","2":"30","3":"30","4":"30","_rn_":"Thomas R Tillis"},{"1":"John Cornyn","2":"27","3":"27","4":"27","_rn_":"John Cornyn"},{"1":"Jon Kyl","2":"26","3":"26","4":"26","_rn_":"Jon Kyl"},{"1":"Timothy M Kaine","2":"25","3":"25","4":"25","_rn_":"Timothy M Kaine"},{"1":"Saxby Chambliss","2":"23","3":"23","4":"23","_rn_":"Saxby Chambliss"},{"1":"Tina Smith","2":"20","3":"20","4":"20","_rn_":"Tina Smith"},{"1":"David B Vitter","2":"20","3":"20","4":"20","_rn_":"David B Vitter"},{"1":"Thomas Udall","2":"20","3":"20","4":"20","_rn_":"Thomas Udall"},{"1":"Daniel S Sullivan","2":"20","3":"20","4":"20","_rn_":"Daniel S Sullivan"},{"1":"A. Mitchell McConnell Jr.","2":"17","3":"17","4":"17","_rn_":"A. Mitchell McConnell Jr."},{"1":"John D Rockefeller IV","2":"15","3":"15","4":"15","_rn_":"John D Rockefeller IV"},{"1":"Rand Paul","2":"10","3":"10","4":"10","_rn_":"Rand Paul"},{"1":"Benjamin L Cardin","2":"10","3":"10","4":"10","_rn_":"Benjamin L Cardin"},{"1":"William F Hagerty IV","2":"9","3":"9","4":"9","_rn_":"William F Hagerty IV"},{"1":"Claire McCaskill","2":"6","3":"6","4":"6","_rn_":"Claire McCaskill"},{"1":"Jacklyn S Rosen","2":"4","3":"4","4":"4","_rn_":"Jacklyn S Rosen"},{"1":"Mark Begich","2":"4","3":"4","4":"4","_rn_":"Mark Begich"},{"1":"John N Kennedy","2":"4","3":"4","4":"4","_rn_":"John N Kennedy"},{"1":"Mark R Warner","2":"4","3":"4","4":"4","_rn_":"Mark R Warner"},{"1":"John W Hickenlooper","2":"3","3":"3","4":"3","_rn_":"John W Hickenlooper"},{"1":"Barbara A Mikulski","2":"3","3":"3","4":"3","_rn_":"Barbara A Mikulski"},{"1":"Michael F Bennet","2":"3","3":"3","4":"3","_rn_":"Michael F Bennet"},{"1":"Barbara Boxer","2":"2","3":"2","4":"2","_rn_":"Barbara Boxer"},{"1":"Robert P Casey Jr.","2":"2","3":"2","4":"2","_rn_":"Robert P Casey Jr."},{"1":"Joseph Manchin III","2":"2","3":"2","4":"2","_rn_":"Joseph Manchin III"},{"1":"Michael B Enzi","2":"2","3":"2","4":"2","_rn_":"Michael B Enzi"},{"1":"Maria Cantwell","2":"2","3":"2","4":"2","_rn_":"Maria Cantwell"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="closeness-centrality" class="level4">
<h4 class="anchored" data-anchor-id="closeness-centrality">Closeness Centrality</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(igraph<span class="sc">::</span><span class="fu">closeness</span>(network_graph))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Sheldon Whitehouse      James M Inhofe Robert P Corker Jr.     Thomas R Carper 
         0.01562500          0.01428571          0.01612903          0.01492537 
Thomas H Tuberville      Kelly Loeffler 
         0.01351351          0.01449275 </code></pre>
</div>
</div>
</section>
</section>
<section id="thoughts" class="level3">
<h3 class="anchored" data-anchor-id="thoughts">Thoughts</h3>
<ul>
<li>Investing in stocks, especially blue-chip stocks or index funds, may not always be especially intentional. Very few people - and I would guess, even fewer Congresspeople - are actually picking their stocks and day trading - though some are, and this data reflects that!</li>
<li>As mentioned, I can vary the existence of the edge by setting the threshold to 3 or 5 stocks in common, instead of one.</li>
<li>I intend to find data from the House of Representatives as well. The scraping tools for this data are open source.</li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>